(function(d){var h=new google.maps.Geocoder;d.fn.autoGeocoder=function(b){var a=d.fn.autoGeocoder,b=d.extend(true,{},a.defaults,b||{}),a=b.setup||a.base;for(property in a)for(var c=a[property],e=0,f=c.length;e<f;e++)c[e].call(this,b);return this.trigger("auto-geocoder.initialize")};d.fn.autoGeocoder.base={initialize:[function(b){b.initial.center=google.maps.LatLng.call(this,b.initial.center);this.bind("auto-geocoder.initialize",function(){d(this).trigger("auto-geocoder.createMap").trigger("auto-geocoder.onKeyUp")})}],
createMap:[function(b){this.bind("auto-geocoder.createMap",function(){var a=d("<div>",{"class":b.className}),c=b.position;if(c=="before"||c=="after")d(this)[c](a);else d(c).append(a);d(this).bind("keyup.auto-geocoder",function(){d(this).trigger("auto-geocoder.onKeyUp")});this.map=new google.maps.Map(a[0],b.initial)})}],onKeyUp:[function(b){this.bind("auto-geocoder.onKeyUp",function(){var a=this,c=d(a),e=d.trim(c.val()).replace(/\s+/g," ").toLowerCase(),f=this.timeout,g=this.previousAddress;f&&clearTimeout(f);
if(!(g&&g==e))e==""?c.trigger("auto-geocoder.onGeocodeResult",[[],""]):this.timeout=setTimeout(function(){a.previousAddress=e;h.geocode({address:e},function(a,b){c.trigger("auto-geocoder.onGeocodeResult",[a,b])})},b.delay)})}],onGeocodeResult:[function(b){this.get(0).marker=new google.maps.Marker;this.bind("auto-geocoder.onGeocodeResult",function(a,c,e){var a=this.map,f=this.marker;e==google.maps.GeocoderStatus.OK?(b.success.zoom=="auto"?a.fitBounds(c[0].geometry.viewport):(a.setZoom(b.success.zoom),
a.setCenter(c[0].geometry.location)),f.setPosition(c[0].geometry.location),f.setMap(a),d(this).trigger("auto-geocoder.onGeocodeSuccess",[c,e])):(f&&f.setMap(null),a.setZoom(initial.zoom),a.setCenter(initial.center),d(this).trigger("auto-geocoder.onGeocodeFailure",[c,e]))})}],onGeocodeSuccess:[],onGeocodeFailure:[]};d.fn.autoGeocoder.defaults={className:"jquery-auto-geocoder-map",position:"after",delay:500,success:{zoom:"auto"},initial:{zoom:1,center:[34,0],draggable:false,mapTypeId:google.maps.MapTypeId.ROADMAP,
mapTypeControl:false}}})(jQuery);
